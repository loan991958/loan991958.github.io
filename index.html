<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- cai sau can cho menu icon -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<!--tai cai sau fuc vu cho hthi pdf cua firefox lam-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
<title>ST. ANDREW DUNG-LAC CHURCH</title>
<style>
/* Reset m·∫∑c ƒë·ªãnh */
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Times New Roman', serif;
background-color: #f9f9f9;

color: #2f2f2f;
}

/* Header */
header {
background-image:url("images/banner2.png");  
position: sticky;
top: 0;
z-index: 1;
background-color: #ffffff;
padding: 10px;
padding-bottom: 20px;
/*text-align: center;*/
border-bottom: 2px solid #d4af37; /* v√†ng √°nh kim */
}
#toggle-icon{
    font-size:x-large;
    color:gray;
}
#headphone{
    border:none;
    border-radius:50% ;
    width:30px;
    height:30px;
    font-size:22px;
}
#nButt{
    /*background-color:transparent; */
    border-radius:50% ;
    font-size: 18px;
    width:30px;
    height:30px;
    border:rgb(168, 165, 165);
    color:yellow;
    background-color: rgb(163, 161, 159);
}
.menu-text ul li{
    list-style: none;
    display: inline-block;
    position: relative;
    /*margin-right: 30px;*/

}
/* chung cho cac tieu de section : doi mau ---------------------- */
.title-sect {
   color: blue;
    text-align: center;
}
.title-sect-xanh {
    color: darkblue;
    text-align: center;
}
/* HET chung cho cac tieu de section : doi mau ---------------------- */

#sect0 {
    min-height: 65vh;
    width: 100%;
    margin: auto;
    /* background-image: linear-gradient(rgba(4,9,0.7),rgba(4,9,30,0.7)), 
    url("images/banner.png"); */
    background-image: url("images_sect0/0.png");
    background-position: center ;
    background-size: cover;
    position: relative;}
.text-box{
    width: 90%;
    color: #d4af37;
    position: absolute;
    top: 80%;
    left: 50%;
    transform: translate(-50%,-50%) ;
    text-align: center;
}
.text-box h1{
    font-size: 20px;
    color: #d4af37;

}
.text-box p{
    margin: 10px 0 40px;
    font-size: 14px;
    color: #d4af37;

}
.prev, .next {
  cursor: pointer;
  position: absolute;
  color: white;
  font-weight: bold;
  font-size: 18px;
  width:auto;
  bottom: 0%;
  transition: 0.6s ease;
  border-radius: 0 5px 5px 0;
  margin-top: -22px;
  padding: 6px;
  user-select: none;
}
.next {
  right: 0;
  border-radius: 5px 0 0 5px;
}
/* On hover, add a black background color with a little bit see-through */
.prev:hover, .next:hover {
  background-color: rgba(0,0,0,0.8);
}
/* End Hai mui ten < > toi lui */



header h1 {
font-size: 2.6em;
color: #d4af37;
}

nav a {
color: #2f2f2f;
margin: 0 15px;
text-decoration: none;
font-size: 1.1em;
}

nav a:hover {
color: #d4af37;
}

/* Ph·∫ßn n·ªôi dung ch√≠nh */
main {
max-width: 800px;
margin: 0px auto;
padding: 20px;

}

main h2 {
color: #d4af37;
margin-bottom: 10px;
}

main p {
line-height: 1.5;
margin-bottom: 15px;
font-size: 20px;
}


/* Footer */
footer {
background-image:url("images/banner2.png");  
/*background-color: #2f2f2f;*/
color: #ffffff;
text-align: center;
padding: 20px;
margin-top: 20px;
}

footer p, footer a {
color: #d2caca;
font-size: 0.9em;
}

footer a:hover {
color: #d4af37;
}
/*img {
float: right;
margin: 0px;
width:200px;
height:auto;
}*/
nav a{
    color:rgb(189, 187, 187);
}
.center{
    text-align: center;
}
button[data-headphone-mau ='0']{
    background-color: transparent;
}
button[data-headphone-mau ='1']{
    background-color: rgb(167, 165, 165);
}
.menu-text{
    text-align: center;
}

#pdf-container-vi,#pdf-container-en {
    height: 100vh;
    overflow-y: scroll;
    -webkit-overflow-scrolling: touch;
    padding: 0px;
    box-sizing: border-box;

}

canvas{
    display:block;
    margin: 0 auto 20px auto;
    max-width: 100%;
    padding-bottom:20px; 
    /*border-bottom:2px solid #ccc; bo cai nay de cho js lam, de tranh trang cuoi cung co ke thi khong dep*/
}
#chua-textruttu-pdf-vi{
    display: none;
}    
#chua-text-dich-ra-en{
    display: none;

}
.center{
    text-align: center;
}
.row{
    margin-top: 5%;
    display: flex;
    justify-content: space-between;
}
.giomucvu-col{
    flex-basis: 26%;
    background: #fff3f3;
    border-radius: 10px;
    margin-bottom: 5%;
    padding: 10px 10px;
    box-sizing: border-box;
    transition: 0.5s;
}

.anh-tc{
    width:50px;
    height:50px;
    border-radius: 50%;
}
table:nth-of-type(1) {
        font-family: arial, sans-serif;
        border: none;
        text-align: center;
        color: brown;
        width: 100%;
}
table:nth-of-type(2) {
        text-align: left;
        color: green;
        width: 100%;
}
table:nth-of-type(2) td {
    text-align: right;

}
table:nth-of-type(3) {
        text-align: left;
        color: blue;
        width: 100%;
}
table:nth-of-type(3) td {
    text-align: right;

}
      

/* ·∫®n menu vƒÉn b·∫£n khi k√≠ch th∆∞·ªõc m√†n h√¨nh nh·ªè h∆°n 600px cho sec1*/
@media (max-width: 600px) {
    .menu-text {
        visibility: hidden;
        width: 0;
        height: 0;
        padding: 0;
        margin: 0;
        overflow: hidden;}
    .menu-text.visible {
        visibility: visible;
        position: absolute;
        background: black;
        height: 20vh;
        width: 100%;
        top: 64;
        right: 0px;
        text-align: center;
        z-index: 2;
        transition: 0.3s;
        line-height: 2.4;
        background-image:url("images/banner2.png");  
        padding-top: 10px;}
    .menu-text.hidden {
        visibility: hidden;
        width: 0;
        height: 0;
        padding: 0;
        overflow: hidden;}
}
/* HET sect0------------------------------------------------------ */
</style>
</head>
<body>
<!-- Header -->
<header class="sticky">
    <i id="toggle-icon" class="fa fa-bars menu-icon"></i>
    <a> &nbsp;<span style="color:#ddc168;font-size: 0.8em;"><b>ST. ANDREW DUNG-LAC CATHOLIC CHURCH</b></span></a>
    <div style="float:right;">
        <button data-headphone-mau ='0' id="headphone" onclick="readSelectedText()">üîà</button>
        &nbsp;&nbsp;<button class="buttlang" onclick="nButtLang();" id="nButt">vi</button>
    </div>
        <!--<h1>Nh√† Th·ªù C√¥ng Gi√°o Anr√™ D≈©ng L·∫°c</h1>-->
    <br>
    <nav class="menu-text" id="menutext">
    <ul>
        <li><a id="menu0" href="#sect0" onclick="fchon_sec(id)">H√¨nh ·∫¢nh</a></li>
        <li><a id="menu1" href="#sect1" onclick="fchon_sec(id)">Gi·ªõi Thi·ªáu</a></li>
        <li><a id="menu2" href="#sect2" onclick="fchon_sec(id)">Th√°nh L·ªÖ</a></li>
        <li><a id="menu3" href="#sect3" onclick="fchon_sec(id)">S·ª± Ki·ªán</a></li>
        <li><a id="menu4" href="#sect4" onclick="fchon_sec(id)">Li√™n H·ªá</a></li>
    </ul>
    </nav>
</header>
<!-- N·ªôi dung ch√≠nh ------------------------------------------------------------------>
<main>
<!-- Sect0 menu - buttLang ---------------------------------------------------->
<section id="sect0" class="header">
    <div class="text-box">
        <h1>ST. ANDREW D≈®NG-L·∫†C<br>CATHOLIC CHURCH</h1>
        <h4> 1201 Lafitte Rd. Abbeville, Louisana 70510</h4>
    </div> 
    <a class="prev" onclick="changeImageSect0(-1)">‚ùÆ</a>
    <a class="next" onclick="changeImageSect0(1)">‚ùØ</a>
<hr>    
</section><!------------------ End sect0 ------------------------------------->
<!-- Gi·ªõi thi·ªáu -------------------------------------------------------------->
<section id="sect1">
<div id='sect1vi'>

    <br>
    <h2 class="title-sect" >Gi·ªõi Thi·ªáu</h2>
    <h1 style="font-size:xx-large;text-align: center;">‚õ™</h1>
    <br>
    <p>
        <span style="color:blue;">Ch√†o m·ª´ng</span> ƒë·∫øn v·ªõi blog chia s·∫ª th√¥ng tin v·ªÅ <span style="color:red;">Nh√† Th·ªù C√¥ng Gi√°o Th√°nh Andrew D≈©ng L·∫°c</span>.<br> 
    Ch√∫ng t√¥i l√† m·ªôt nh√≥m t√≠n h·ªØu thu·ªôc Gi√°o X·ª© Th√°nh Andrew D≈©ng-L·∫°c. V·ªõi s·ª© m·ªánh 
    ph·ª•c v·ª• v√† y√™u th∆∞∆°ng, trong khi ch·ªù ƒë·ª£i Gi√°o x·ª© c√≥ trang web ch√≠nh th·ª©c, ch√∫ng t√¥i 
    l√†m blog n√†y ƒë·ªÉ chia s·∫ª m·ªôt s·ªë th√¥ng tin v·ªÅ m·ª•c v·ª• v√† ph·ª•ng v·ª• cho c·ªông ƒë·ªìng v·ªõi 
    mong mu·ªën mang l·∫°i nh·ªØng gi√° tr·ªã t·ªët ƒë·∫πp v√† lan t·ªèa ni·ªÅm tin v√†o <span style="color:red;">Thi√™n Ch√∫a</span> cho 
    nhi·ªÅu ng∆∞·ªùi.<br>
    H√¨nh ·∫£nh tr√™n ƒë√¢y l√† Nh√† Th·ªù C√¥ng Gi√°o Th√°nh Andrew D≈©ng-L·∫°c, l√† n∆°i h·ªôi t·ª• 
    ph·ª•ng v·ª• c·ªßa C·ªông ƒë·ªìng Gi√°o x·ª© Th√°nh Andrew D≈©ng-L·∫°c. Ban ƒë·∫ßu Gi√°o x·ª© n√†y ch·ªâ g·ªìm m·ªôt s·ªë t√≠n h·ªØu 
    di t·∫£n ƒë·∫øn t·ª´ Vi·ªát Nam, nh∆∞ng cho ƒë·∫øn nay n∆°i n√†y ƒë√£ h√¨nh th√†nh m·ªôt Gi√°o x·ª© ph√°t tri·ªÉn 
    phong ph√∫.<br>  
    Sau nh·ªØng nƒÉm th√°ng mong ch·ªù, Nh√† Th·ªù ƒë√£ ƒë∆∞·ª£c x√¢y d·ª±ng xong 
    t·∫°i <span style="color:blue;">1201 Lafitte Rd. Abbeville, Louisana 70510</span> v√† kh√°nh th√†nh v·∫£o ng√†y 
    24-11-2024.<br>

    </p>

    <br>
</div>
<div id='sect1en'>
</div>
<hr>
<br>
</section>

    <!-- L·ªÖ v√† Th√°nh L·ªÖ -->
<section id="sect2">
    <div id='sect2vi'>
    <br>    
    <h2 class="title-sect">L·ªÖ v√† Th√°nh L·ªÖ</h2>
    <h1 style="font-size:xx-large;text-align: center;">üôè</h1>    
    <br>
    <p>Th√°nh L·ªÖ ƒë∆∞·ª£c c·ª≠ h√†nh v√†o c√°c ng√†y trong tu·∫ßn:<br>
        - <b><span style="color:blue;">Ch·ªß Nh·∫≠t:</span> 11:30 am.</b><br> 
        - <b><span style="color:red">Th·ª© S√°u:</span> 6:00 pm.</b><br>
        Xin m·ªùi qu√Ω v·ªã ƒë·∫øn tham d·ª± v√† c·∫ßu nguy·ªán c√πng c·ªông ƒëo√†n.
    </p>
</div>
<div id='sect2en'>
</div>
<hr>
<br>
</section>

<!-- S·ª± ki·ªán -->
<section id="sect3">
    <div id='sect3vi'>
        
    <br>    
    <h2 class="title-sect">S·ª± Ki·ªán</h2>
    <h1 style="font-size:xx-large;text-align: center;">‚úùÔ∏èÔ∏è</h1>    
    <br>
        
    <p>H√£y tham gia c√°c s·ª± ki·ªán ƒë·∫∑c bi·ªát c·ªßa ch√∫ng t√¥i, bao g·ªìm c√°c l·ªÖ h·ªôi, 
        bu·ªïi h√≤a nh·∫°c v√† c√°c ho·∫°t ƒë·ªông t·ª´ thi·ªán.<br>
        <span style="color:blue;">Ng√†y 24-11-2024 t·ª´ 10:00 - 12:00 Kh√°nh th√†nh Nh√† Th·ªù m·ªõi.</span> K√≠nh m·ªùi c√°c t√≠n h·ªØu tham d·ª±.<br>
        Nh√† Th·ªù mang t√™n Th√°nh Andrew D≈©ng-L·∫°c. M·ªôt ng∆∞·ªùi Vi·ªát Nam ch·ªãu t·ª≠ v√¨ ƒë·∫°o ·ªü Th·∫ø k·ª∑ 19:<br>
        D∆∞·ªõi ƒë√¢y l√† l·ªãch s·ª≠ Th√°nh Andrew D≈©ng-L·∫°c: <br>
    </p>
    <!--<iframe src="pdf/pdf1.pdf" style="width:100%; height:100vh" frameborder="0"></iframe>-->
    <!--<canvas id="pdf-canvas" style="width:100%; height:100vh" frameborder="0"></canvas>-->
    <br>
    <button onclick="docNghePdf()" > üìöüéßRead pdf </button>
    <br>
    <div id='pdf-container'></div>
    

</div>
<div id='sect3en'>

</div>
<hr>
<br>
</section>

<!-- Li√™n h·ªá -->
<section id="sect4">
    <div id='sect4vi'>
    <br>    
    <h2 class="title-sect">Li√™n H·ªá </h2>
    <h1 style="font-size:xx-large;text-align: center;">üìß</h1>   
    <br> 
    <p>N·∫øu b·∫°n c√≥ b·∫•t k·ª≥ c√¢u h·ªèi ho·∫∑c mu·ªën tham gia v√†o c·ªông ƒë·ªìng c·ªßa ch√∫ng t√¥i, 
        xin li√™n l·∫°c qua ƒëi·ªán tho·∫°i ho·∫∑c email v·ªõi Gi√°o x·ª© qua s·ªë : <br>
        <h4 class="center" ><b></bo>337-740-4649<br></h4>
        <h4 class="center" >P.O Box 715<br></h4>
        <h4 class="center" >Abbeville, Louisana 70511<br></b></h4>
    </p>
    <h4 class="center" ><buttononclick="window.location.href='mailto:tiensg89@gmail.com';">Email: yyyy@gmail.com</button></h4>
    <br><br><br>
    <h3 class='center'>H·ªòI ƒê·ªíNG M·ª§C V·ª§ GI√ÅO X·ª® TH√ÅNH ANDREW D≈®NG L·∫†C</h3>
    <br>
    <table>
        <tr><th >Linh m·ª•c Ch√°nh x·ª©</th><th>&nbsp;&nbsp;&nbsp;&nbsp;</th><th>Ch·ªß t·ªãch H·ªôi ƒê·ªìng</th></tr>
        <tr><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td><td></td><td>‚≠ê‚≠ê‚≠ê‚≠ê</td></tr>
        <tr><td><img class='anh-tc' src="images/cha-adl.png"></td><td></td><td><img class='anh-tc' src="images/hau-adl.png"></td></tr>
        <tr><td>James B·∫©m Nguy·ªÖn</td><td></td><td>ƒêo√†n ƒê·ª©c H·∫≠u</td></tr>
    </table>
    <br>

    <h3 class="center">V√† c√°c v·ªã :</h3>
    <br>
    <table>
        <tr><th ><hr></th><td><hr></td></tr>
        <tr><th >Ph√≥ Ch·ªß T·ªãch N·ªôi V·ª• :</th><td>Nguy·ªÖn C√¥ng B√¨nh</td></tr>
        <tr><th ><hr></th><td><hr></td></tr>
        <tr><th >Ph√≥ Ch·ªß T·ªãch Ngo·∫°i V·ª• :</th><td>Nguy·ªÖn Tu√¢n Anh</td></tr>
        <tr><th ><hr></th><td><hr></td></tr>
        <tr><th >Th∆∞ K√Ω Gi√°o X·ª© :</th><td>Nguy·ªÖn Elisabeth Nga</td></tr>
        <tr><th ><hr></th><td><hr></td></tr>
        <tr><th >Th·ªß Qu·ªπ :</th><td>B√πi Th·ªã Ninh</td></tr>
        <tr><th ></th><td>B√πi Kim Loan</td></tr>
        <tr><th ><hr></th><td><hr></td></tr>
    </table>
    <br><br>
    <h3 class="center">V√† c√°c v·ªã kh√°c :</h3>
    <br>
    <table>
        <tr><th ><hr></th><td><hr></td></tr>
        <tr><th >Th·∫ßy Ph√≥ T·∫ø :</th><td>Tr·∫ßn M. Tam</td></tr>
        <tr><th ></th><td>Nguy·ªÖn M. C∆∞·ªùng</td></tr>
        <tr><th ><hr></th><td><hr></td></tr>
        
        <tr><th >Trustee :</th><td>Tr·∫ßn VƒÉn Vinh</td></tr>
        <tr><th ></th><td>Ng√¥ Nguy√™n ƒê·∫°m</td></tr>
        <tr><th ><hr></th><td><hr></td></tr>

        <tr><th >Book keeping Gi√°o X·ª© :</th><td>B√πi Thanh Thu</td></tr>
        <tr><th ><hr></th><td><hr></td></tr>
        <tr><th >Th∆∞ K√Ω H·ªôi ƒê·ªìng M·ª•c V·ª• :</th><td>Do√†n VƒÉn Quang</td></tr>
        <tr><th ><hr></th><td><hr></td></tr>
        <tr><th >Ban T√†i Ch√°nh :</th><td>B√πi VƒÉn Nu√¥i</td></tr>
        <tr><th ></th><td>Nguy·ªÖn VƒÉn T√¢m</td></tr>
        <tr><th ></th><td>Nguy·ªÖn B√° T√†u</td></tr>
        <tr><th ><hr></th><td><hr></td></tr>

    </table>

    <br>


<div id='sect4en'>
</div>

</section>

</main>

<!-- Footer -->
<footer>
    <p>&copy; 2024 ST. Andrew Dung-Lac Catholic Church. All Rights Reserved.</p>
    <p>1201 Lafitte Rd. Abbeville, LA 70511, USA</p>
    <p><a href="https://www.facebook.com/nhatho" target="_blank">Facebook</a> | <a href="https://www.instagram.com/nhatho" target="_blank">Instagram</a></p>
</footer>

<script>
//-- Cho sect0--------------------------------------------------------
//--1-Cac bien global----------------
var nSect=0;
var nMenu=0;
var nImage=8; // so nay 8 mod 8 bang 0 ung anh goc 0.png la nha tho
var nLang=0;
var maLang='vi';
var nButtHead=0;
const toggleIcon = document.getElementById('toggle-icon');
const menuText = document.getElementById('menutext');
const languagebrowse = document.getElementById('languagebrowse');
let isMenuOpen = false;
var idsectht, idsectht2;
var textdich = '';
var elemChuaTextTuPdf;

//--2- Quan trong Ch·ªâ ƒëi·ªÅu khi·ªÉn vi·ªác ·∫©n/hi·ªán menu-text khi ·ªü ch·∫ø ƒë·ªô mobile (media query)
//--Khi click vao 3 gach o goc trai se dieu khien menu nho--
toggleIcon.addEventListener('click', function () {
    //alert('TEST');
    // Ch·ªâ ƒëi·ªÅu khi·ªÉn vi·ªác ·∫©n/hi·ªán menu-text khi ·ªü ch·∫ø ƒë·ªô mobile (media query)
    if (window.innerWidth <= 760) {
        if (isMenuOpen) {
            menuText.classList.remove('visible');
            menuText.classList.add('hidden');
            toggleIcon.classList.remove('fa-times');
            toggleIcon.classList.add('fa-bars');
        } else {
            menuText.classList.remove('hidden');
            menuText.classList.add('visible');
            toggleIcon.classList.remove('fa-bars');
            toggleIcon.classList.add('fa-times');
        }
        isMenuOpen = !isMenuOpen;
    }
});//-------------------------------------------------------------

//--3-Ham nay duoc goi boi ham ben duoi-----------------------------------
function dichViToEn(textCanDich,ptnode){
    const inputText = textCanDich;
    let sourceLanguage = 'vi';
    let targetLanguage = 'en';

    const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=${sourceLanguage}&tl=${targetLanguage}&dt=t&q=${encodeURI(inputText)}`;

    const xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200){
            const responseReturned = JSON.parse(this.responseText);
            const translations = responseReturned[0].map((text) => text[0]);
            const outputText = translations.join(" ");
            ptnode.nodeValue = ' '+outputText;
            //console.log(ptnode.nodeValue);
        }
    };
    //---------------------
    xhttp.open("GET", url);
    xhttp.send();
}
//---
function dichViToEn_pdf(textCanDich, ptchua){
    const inputText = textCanDich;
    let sourceLanguage = 'vi';
    let targetLanguage = 'en';

    const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=${sourceLanguage}&tl=${targetLanguage}&dt=t&q=${encodeURI(inputText)}`;

    const xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200){
            const responseReturned = JSON.parse(this.responseText);
            const translations = responseReturned[0].map((text) => text[0]);
            const outputText = translations.join(" ");
            console.log(outputText);
            ptchua.innerText= ' '+outputText;
        }
    };
    //---------------------
    xhttp.open("GET", url);
    xhttp.send();
}

//---4- Ham de quy nhan ban cac node con cua moi node----------------------------------
function traverseNodes(node, callback) {
    // G·ªçi callback cho node hi·ªán t·∫°i (c√≥ th·ªÉ l√† ph·∫ßn t·ª≠ ho·∫∑c vƒÉn b·∫£n)
    callback(node);
    // Duy·ªát qua t·∫•t c·∫£ c√°c node con
    node.childNodes.forEach(child => traverseNodes(child, callback));
}
//--5-----------------------------------
function dich_viDivChonClone_en(content){
    //const content = document.querySelector("[data-vi='sect1']");
    traverseNodes(content, node => {
        if (node.nodeType === Node.TEXT_NODE) {
            if (node.nodeValue.trim() !== ''){
                dichViToEn(node.nodeValue,node);
                //da dem dich vao nodeValue  
            }else{
                node.nodeValue=' ';      
            }    
        } else if (node.nodeType === Node.ELEMENT_NODE) {
            //console.log('Tien xem:',node.id);
            console.log(' ');
        }
    });
 }    

//--6--Khi goi ham nay (ngay luc dau) thi no se nhan ban viDiv vao enDiv tuong ung roi dich ra En---
function cloneSectXToEn(sectX){
    if (sectX==='sect1'){
        const viDivChon = document.getElementById("sect1vi");
        const viDivChonClone = viDivChon.cloneNode(true); 
        const enDivNhan = document.getElementById("sect1en");
        dich_viDivChonClone_en(viDivChonClone);
        enDivNhan.append(viDivChonClone);
        enDivNhan.style.display = "none";
    }
    if (sectX==='sect2'){
        const viDivChon = document.getElementById("sect2vi");
        const viDivChonClone = viDivChon.cloneNode(true); 
        const enDivNhan = document.getElementById("sect2en");
        dich_viDivChonClone_en(viDivChonClone);
        enDivNhan.append(viDivChonClone);
        enDivNhan.style.display = "none";
    }
    if (sectX==='sect3'){
        const viDivChon = document.getElementById("sect3vi");
        const viDivChonClone = viDivChon.cloneNode(true); 
        const enDivNhan = document.getElementById("sect3en");
        dich_viDivChonClone_en(viDivChonClone);
        enDivNhan.append(viDivChonClone);
        enDivNhan.style.display = "none";
    }
    if (sectX==='sect4'){
        const viDivChon = document.getElementById("sect4vi");
        const viDivChonClone = viDivChon.cloneNode(true); 
        const enDivNhan = document.getElementById("sect4en");
        dich_viDivChonClone_en(viDivChonClone);
        enDivNhan.append(viDivChonClone);
        enDivNhan.style.display = "none";
    }
    //if (sectX==='sect5'){
    //    const viDivChon = document.getElementById("sect5vi");
    //    const viDivChonClone = viDivChon.cloneNode(true); 
    //    const enDivNhan = document.getElementById("sect5en");
    //    dich_viDivChonClone_en(viDivChonClone);
    //    enDivNhan.append(viDivChonClone);
    //    enDivNhan.style.display = "none";
    //}
    //if (sectX==='sect6'){
    //    const viDivChon = document.getElementById("sect6vi");
    //    const viDivChonClone = viDivChon.cloneNode(true); 
    //    const enDivNhan = document.getElementById("sect6en");
    //    dich_viDivChonClone_en(viDivChonClone);
    //    enDivNhan.append(viDivChonClone);
    //    enDivNhan.style.display = "none";
    //}
    //None enDivNhan
    //enDivNhan.style.display = "none";
}
//--7-Ham nay thuc thi khi click vao nut nBuuton------------------------------
function nButtLang() { 
    //0-TAT OFF am speaker neu dang noi moi lan thay doi Lang
    const synth = window.speechSynthesis;
    if (synth.speaking) {
        synth.cancel(); // D·ª´ng vƒÉn b·∫£n hi·ªán t·∫°i
        let mauhead = document.querySelector("button[data-headphone-mau]")
        mauhead.setAttribute('data-headphone-mau','0');
    }

    nLang=nLang+1;

    if (nLang%2===1){
        maLang='en';
        dichMenu();
        //1-buttonlang ra chu en va mau blue
        document.getElementById("nButt").innerHTML=maLang;
        document.getElementById("nButt").style.color="lightblue";
        //2-Neu chon Toan trang thi phoi bay all sect va phoi bay all enDiv va che all viDiv
        if (nMenu===0){
            for (let i=1;i<=4;i++){
                //phoi bay all sect
                //let sectx = 'sect'+i;
                document.getElementById('sect'+i).style.display = 'block';
                //phoi bay all enDiv
                //let idsecten="#sect"+i+"en";
                document.getElementById("sect"+i+"en").style.display = 'block';
                //che all viDiv
                //let idsectvi="#sect"+i+"vi";
                document.getElementById("sect"+i+"vi").style.display = 'none';
            }

        }else{//neu nMenu !== 0
            for (let i=1; i<=4;i++){
                if (i===nMenu){
                    //phoi bay 1 sect
                    document.getElementById('sect'+i).style.display = 'block';
                    //phoi bay 1 enDiv
                    document.getElementById("sect"+i+"en").style.display = 'block';
                    //che 1 viDiv
                    document.getElementById("sect"+i+"vi").style.display = 'none';
                }else{
                    //che cac sect con lai
                    document.getElementById('sect'+i).style.display = 'none';
                    //che cac enDiv con lai
                    document.getElementById("sect"+i+"en").style.display = 'none';
                    //che cac viDiv con lai
                    document.getElementById("sect"+i+"vi").style.display = 'none';

                }
            }
        }
    } else {
        //thay doi mau en/vi
        maLang='vi';
        dichMenu();
        //1-buttonlang ra chu vi va mau vang
        document.getElementById("nButt").innerHTML=maLang;
        document.getElementById("nButt").style.color="yellow";
        //2-Neu chon Toan trang thi phoi bay all sect va phoi bay all enDiv va che all viDiv
        if (nMenu===0){
            for (let i=1;i<=4;i++){
                //phoi bay all sect
                document.getElementById('sect'+i).style.display = 'block';
                //phoi bay all viDiv
                document.getElementById("sect"+i+"vi").style.display = 'block';
                //che all viDiv
                document.getElementById("sect"+i+"en").style.display = 'none';
            }
        }else{//neu nMenu !== 0
            for (let i=1; i<=4;i++){
                if (i===nMenu){
                    //phoi bay 1 sect
                    document.getElementById('sect'+i).style.display = 'block';
                    //phoi bay 1 viDiv
                    document.getElementById("sect"+i+"vi").style.display = 'block';
                    //che 1 enDiv
                    document.getElementById("sect"+i+"en").style.display = 'none';
                }else{
                    //che cac sect con lai
                    document.getElementById('sect'+i).style.display = 'none';
                    //che cac enDiv con lai
                    document.getElementById("sect"+i+"en").style.display = 'none';
                    //che cac viDiv con lai
                    document.getElementById("sect"+i+"vi").style.display = 'none';

                }
            }
        }    
    }
}
//--8- Ham chon de muc Menu ----------------------------------------------------
function fchon_sec(id){ 
    maLang=document.getElementById('nButt').innerText;
    console.log(id,maLang);
    //lay ki tu cuoi lam chuong so global
    let nsectstr = id.replace("menu", ""); 
    nSect=parseInt(nsectstr);
    nMenu = nSect;
    if (nMenu===0){
        //Doi ten class title-sect thanh title-sect-xanhdam 
        let a = document.getElementsByClassName( "title-sect" );
        [...a].forEach( x => x.className += " title-sect-xanh" );
        [...a].forEach( x => x.classList.remove("title-sect") );
        //mau text cua menu0 la vang
        document.getElementById('menu0').style.color='orange';
        if (maLang==='vi'){
            for (let i=1;i<=4;i++){
                //mau text cua menu1 - 6  la trang
                document.getElementById('menu'+i).style.color='lightblue';
                //phoi bay all sect 1 to 6
                document.getElementById('sect'+i).style.display = 'block';
                //phoi bay all enDiv trong cac sect 1 to 6
                document.getElementById("sect"+i+"vi").style.display = 'block';
                //che all viDiv trong cac sect 1 to 6
                document.getElementById("sect"+i+"en").style.display = 'none';
            }
        } else {//maLang==='en'
            for (let i=1;i<=4;i++){
                //mau text cua menu1 - 6  la trang
                document.getElementById('menu'+i).style.color='lightblue';
                //phoi bay all sect 1 to 6
                document.getElementById('sect'+i).style.display = 'block';
                //phoi bay all enDiv trong cac sect 1 to 6
                document.getElementById("sect"+i+"en").style.display = 'block';
                //che all viDiv trong cac sect 1 to 6
                document.getElementById("sect"+i+"vi").style.display = 'none';
            }
        }
    }else{//nMenu !== 0
        //Doi ten class title-sect thanh title-sect-xanh
        let a = document.getElementsByClassName( "title-sect-xanh" );
        [...a].forEach( x => x.className += " title-sect" );
        [...a].forEach( x => x.classList.remove("title-sect-xanh") );
        

        if (maLang==='vi'){
            for (let i=1;i<=4;i++){
                if (i===nMenu){
                    //mau text cua menu0 la trang
                    document.getElementById('menu0').style.color='lightblue';
                    //mau text cua menuChon la vang
                    document.getElementById('menu'+i).style.color='orange';
                    //phoi bay 1 sect chon
                    document.getElementById('sect'+i).style.display = 'block';
                    //phoi bay 1 viDiv cua 1 sect chon
                    document.getElementById("sect"+i+"vi").style.display = 'block';
                    //che all enDiv cua cac sect ko chon 
                    document.getElementById("sect"+i+"en").style.display = 'none';
                }else{//i !== nMenu
                    //mau text cua menu0 la trang
                    document.getElementById('menu0').style.color='lightblue';
                    document.getElementById('menu'+i).style.color='lightblue';
                    document.getElementById('sect'+i).style.display = 'none';
                    document.getElementById("sect"+i+"vi").style.display = 'none';
                    document.getElementById("sect"+i+"en").style.display = 'none';

                }
            }
        } else {//maLang==='en'
            for (let i=1;i<=4;i++){
                if (i===nMenu){
                    document.getElementById('menu0').style.color='white';
                    document.getElementById('menu'+i).style.color='orange';
                    //phoi bay all sect
                    document.getElementById('sect'+i).style.display = 'block';
                    //phoi bay all enDiv
                    document.getElementById("sect"+i+"en").style.display = 'block';
                    //che all viDiv
                    document.getElementById("sect"+i+"vi").style.display = 'none';
                }else{
                    document.getElementById('menu0').style.color='white';
                    document.getElementById('menu'+i).style.color='white';
                    document.getElementById('sect'+i).style.display = 'none';
                    document.getElementById("sect"+i+"en").style.display = 'none';
                    document.getElementById("sect"+i+"vi").style.display = 'none';

                }
            }
        }


    }
}
//--9- Ham doc tieng Anh ·ªè Viet theo gi·ªçng doc da cai trong may, co the khac nhau hoac chua cai-üéß
function speakViEn(text,malang){
    const message = new SpeechSynthesisUtterance(text);
    message.lang = malang;
    const voices = speechSynthesis
                    .getVoices()
                    .filter(voice => {
                        voice.lang = malang;});
    message.voice = voices[0];
    speechSynthesis.speak(message);
}

//-10- ---------------------------
function speakerViEnSectX(maLang, sectX){
    //alert(sectX.slice(-1));
    if (maLang === 'vi'){
        let maLangNoi = 'vi-VN';
        const content = document.getElementById(sectX+'vi');
        let textvi='';
        traverseNodes(content, node => {
            if (node.nodeType === Node.TEXT_NODE) {
                if (node.nodeValue.trim() !== ''){
                    textvi += node.nodeValue.trim()+' ';
                }
            }
        });
        textvi = textvi.replace(/üéß/g,'');
        speakViEn(textvi,maLangNoi);   
    }
    if (maLang === 'en'){
        let maLangNoi = 'en-US';

        const content = document.getElementById(sectX+'en');
        let texten='';
        traverseNodes(content, node => {
            if (node.nodeType === Node.TEXT_NODE) {
                if (node.nodeValue.trim() !== ''){
                    texten += node.nodeValue.trim()+' ';
                    //da dem dich vao nodeValue
                }
            }
        });
        texten = texten.replace(/üéß/g,'');
        speakViEn(texten,maLangNoi);   
    }
}
//--Xem hinh anh khi click < hoac > ---------------
function changeImageSect0(n) { 
    if (nSect !== 0){
        let images_sectN="images_sect"+String(nSect)+"/";
        nImage = nImage + n
        mod_nImage_8 = nImage % 8; 
        let im = String(mod_nImage_8)+'.png';
        //document.getElementById('sect0').style.backgroundImage = "url('images_sect0/" + im + "')";
        document.getElementById('sect0').style.backgroundImage = "url('" + images_sectN + im + "')";
    } else {
        for (let j = 0; j <= 4; j++) {
            let images_sectN="images_sect"+String(j)+"/";
            nImage = nImage + n
            mod_nImage_8 = nImage % 8; 
            let im = String(mod_nImage_8)+'.png';
            //document.getElementById('sect0').style.backgroundImage = "url('images_sect0/" + im + "')";
            document.getElementById('sect0').style.backgroundImage = "url('" + images_sectN + im + "')";
    
        }
    }    
}
//---------
function readSelectedText() {
        // L·∫•y ƒëo·∫°n vƒÉn b·∫£n ƒë√£ ch·ªçn
        const selectedText = window.getSelection().toString();

        // Ki·ªÉm tra xem ng∆∞·ªùi d√πng c√≥ ch·ªçn vƒÉn b·∫£n n√†o kh√¥ng
        if (selectedText) {
            // T·∫°o m·ªôt ƒë·ªëi t∆∞·ª£ng SpeechSynthesisUtterance ƒë·ªÉ ƒë·ªçc vƒÉn b·∫£n
            const speech = new SpeechSynthesisUtterance(selectedText);

            // Ch·ªçn ng√¥n ng·ªØ (v√≠ d·ª•: ti·∫øng Vi·ªát)
            let malang;
            if (document.getElementById('nButt').innerText==='vi'){
                speech.lang = 'vi-VN';
                malang='vi-VN'
            }else{
                speech.lang = 'en-US';
                malang='en-US';
            }

            speech.onend = function(){
                let mauhead = document.querySelector("button[data-headphone-mau]")
                mauhead.setAttribute('data-headphone-mau','0');
                window.getSelection().removeAllRanges();
                selectedText='';

            }
            // ƒê·ªçc vƒÉn b·∫£n
            const voices = speechSynthesis
                        .getVoices()
                        .filter(voice => {
                            voice.lang = malang;
                        });
            speech.voice = voices[0];
            window.speechSynthesis.speak(speech);

            let mauhead = document.querySelector("button[data-headphone-mau]")
            mauhead.setAttribute('data-headphone-mau','1');

            if (! window.speechSynthesis.speaking) {
                window.speechSynthesis.cancel(); // D·ª´ng vƒÉn b·∫£n hi·ªán t·∫°i
                mauhead.setAttribute('data-headphone-mau','0');

            }



        } 
}
//--------
document.addEventListener('touchend', () => {
        readSelectedText();
});
//--Cho dich Menu--------------------
function dichMenu(){
    const menuarr = '{"dong": [{"vi": "H√¨nh ·∫¢nh", "en": "Images"},'+
                            '{"vi": "Gi·ªõi Thi·ªáu", "en": "About"},'+
                            '{"vi": "Th√°nh L·ªÖ", "en": "Services"},'+
                            '{"vi": "S·ª± Ki·ªán", "en": "Events"},'+
                            '{"vi": "Li√™n H·ªá", "en": "Contact"}]}';
    const obj = JSON.parse(menuarr);
    if (maLang==='vi'){
        document.getElementById('menu0').innerText = obj.dong[0].vi;
        document.getElementById('menu1').innerText = obj.dong[1].vi;
        document.getElementById('menu2').innerText = obj.dong[2].vi;
        document.getElementById('menu3').innerText = obj.dong[3].vi;
        document.getElementById('menu4').innerText = obj.dong[4].vi;
    } else {
        document.getElementById('menu0').innerText = obj.dong[0].en;
        document.getElementById('menu1').innerText = obj.dong[1].en;
        document.getElementById('menu2').innerText = obj.dong[2].en;
        document.getElementById('menu3').innerText = obj.dong[3].en;
        document.getElementById('menu4').innerText = obj.dong[4].en;
    }
}
//--Cho pdf----------------------------
// Sau khi dat tai html cai nay <div id="pdf-container" ></div>
// now : tai tep pdf len de tao thanh image canvas cho thich hop
//const url = 'pdf/pdf1.pdf';
//CDN lam viec phai tai ve
pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';

function taoCanvasPdf(urlpdf,idpdfcontainer){
//tao cac canvas tu moi trang pdf
pdfjsLib.getDocument(urlpdf).promise.then((pdf) => {
    const pdfContainer = document.getElementById(idpdfcontainer);
    for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
        pdf.getPage(pageNum).then((page) => {
            const scale = 1.8;//16:9 la tot nhat tren mang
            const viewport = page.getViewport({ scale: scale });
            // T·∫°o ph·∫ßn t·ª≠ canvas cho m·ªói trang
            const canvas = document.createElement("canvas");
            const context = canvas.getContext("2d");
            canvas.height = viewport.height;
            canvas.width = viewport.width;
            // Th√™m canvas v√†o container
            pdfContainer.appendChild(canvas);
            //them gach ngang giua cac trang nhung trang ccung khong them
            if (pageNum < pdf.numPages){
                const hr = document.createElement("hr");
                hr.style.border = "1px solid #ccc";
                hr.style.margin = "20px 0";
                pdfContainer.appendChild(hr);
            }

            const renderContext = {
                canvasContext: context,
                viewport: viewport
            };
            page.render(renderContext);
        });
    }
});
}
taoCanvasPdf('pdf/lsthanhdunglac.pdf','pdf-container');
//----pdfen

</script>

<script type="module">//-----rut text tu pdf de doc nghe ----
//tai hai dong nay global de phuc vu ham extractText ben duoi
//ham nay se duoc goi khi nhap nut docNghePdf
    import * as pdfjsLib from 'https://mozilla.github.io/pdf.js/build/pdf.mjs';

    pdfjsLib.GlobalWorkerOptions.workerSrc =
        'https://mozilla.github.io/pdf.js/build/pdf.worker.mjs';
</script>

<script>
//-------ham rut text tu voi thong so pdfUrl cua pdf khi goi ham
function extractText(pdfUrl) {
    var pdf = pdfjsLib.getDocument(pdfUrl);
    return pdf.promise.then(function (pdf) {
        var totalPageCount = pdf.numPages;
        var countPromises = [];
        for (
            var currentPage = 1;
            currentPage <= totalPageCount;
            currentPage++
        ) {
            var page = pdf.getPage(currentPage);
            countPromises.push(
                page.then(function (page) {
                    var textContent = page.getTextContent();
                    return textContent.then(function (text) {
                        return text.items
                            .map(function (s) {
                                return s.str;
                            })
                            .join(' ');
                    });
                }),
            );
        }

        return Promise.all(countPromises).then(function (texts) {
            return texts.join(' ');
        });
    });
}
//---ham nay lam viec khi nhap nut button docnghepdf, no se goi ham extractText o tren
//de ham extractText rut text ra tu pdf roi doc bang giong viet hoac anh tuy maLang dat truoc khi goi ham 
function docNghePdf(){
    if (maLang==='vi'){
        let text = document.getElementById("chua-textruttu-pdf-vi").innerText;
        speakViEn(text,'vi-VN');
    }else{
        let text = document.getElementById("chua-text-dich-ra-en").innerText;
        speakViEn(text,'en-US');

    }
}
//--HET rut text tu pdf de doc nghe ----
function addElement() {
    //them pt chua text rut ra tu pdf vi roi dua text rut vao do
    const newDiv1 = document.createElement("div");
    newDiv1.id = 'chua-textruttu-pdf-vi';
    document.getElementById("sect3vi").append(newDiv1);

    elemChuaTextTuPdf=newDiv1;

    const urlpdf ='pdf/lsthanhdunglac.pdf';
    extractText(urlpdf).then(
        function (text) {
            elemChuaTextTuPdf.innerText=text;
            //console.log(elemChuaTextTuPdf.innerText);
            //them pt chua canvas pdf trong sect3en roi tao canvas dem vao do  
            const newDiv2 = document.createElement("div");
            newDiv2.id = 'pdf-container-en';
            document.getElementById("sect3en").append(newDiv2);
            taoCanvasPdf('pdf/lsthanhdunglac.pdf','pdf-container-en');

            //them pt chua text rut ra tu pdf vi roi dua text rut vao do
            const newDiv3 = document.createElement("div");
            newDiv3.id = 'chua-text-dich-ra-en';
            document.getElementById("sect3en").append(newDiv3);
            const textCanDich =  elemChuaTextTuPdf.innerText;
            console.log(textCanDich);   
            dichViToEn_pdf(textCanDich, newDiv3);


        },
        function (reason) {
            console.error(reason);
        },
    );
}
//--
</script>


    
<script>
//---Doc nghe PDF---

//-- can dat cuoi tep 6 lenh thuc thu ham cloneSectXToEn() voi doi so la cac sectx 

cloneSectXToEn('sect1'); 
cloneSectXToEn('sect2'); 
cloneSectXToEn('sect3'); 
cloneSectXToEn('sect4'); 
//cloneSectXToEn('sect5'); 
//cloneSectXToEn('sect6'); 
fchon_sec("menu0");
dichMenu();
document.getElementById('menu0').style.color='orange';

//them element div vao cuoi div sect3 va dat id cua no la pdf-container-en
//vi khong the nhan ban pdf-container ma khong sua id
addElement();
//tao canvas pdf trong pdf-container-en
//taoCanvasPdf('pdf/lsthanhdunglac1.pdf','pdf-container-en');
//them div chua text rut ra tu pdf vi

//themDivChuaTextRutTuPdf();
//dichTextViRaEnVaChua();

</script>

</body>
</html>
